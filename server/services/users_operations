const get_client = require('get_client');

// create a new user
async function createUser(newUser){
    const query = {
        text: 'INSERT INTO users (username, password, email) VALUES ($1, $2, $3) RETURNING *',
        values: [newUser.username, newUser.password, newUser.email]
    }
    try{
        const client = await get_client();
        const { rows } = await client.query(query);
        client.release();
        return rows[0];
    } catch (error){
        console.log(error);
        return error;
    }
}

// get user by email
async function getUserByEmail(email){
    const query = {
        text: 'SELECT * FROM users WHERE email = $1',
        values: [email]
    }
    try{
        const client = await get_client();
        const { rows } = await client.query(query);
        client.release();
        return rows[0];
    } catch (error){
        console.log(error);
        return error;
    }
}

module.exports = {
    createUser,
    getUserByEmail
}